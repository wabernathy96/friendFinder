<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Friend Finder</title>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet">
    <link href="./css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <a href="home.html">
                <h1 class="deep-purple-text center main-title">
                    <i class="material-icons" style="font-size: 48px">face</i>
                    Friend Finder
                </h1>
            </a>
        </header>
    
        <main>
            <div class="row">
                <div class="col m12 center-align">
                    <form id="userForm" class="col m12" action="/api/friends" method="post">
                        <div class="card-panel">
                            <div class="row">
                                    <div class="row">
                                    <div class="input-field col s6 deep-purple-text">
                                        <i class="material-icons prefix">account_circle</i>
                                        <input name="userName" id="userName" type="text" class="validate">
                                        <label for="userName">Name</label>
                                    </div>
                                    <div class="input-field col s6 deep-purple-text">
                                        <i class="material-icons prefix">camera_front</i>
                                        <input name="photoLink" id="photoLink" type="text" class="validate">
                                        <label for="photoLink">Link to Photo of You</label>
                                    </div>
                                </div>
                            </div>
                        </div>



                <div class="row">
                        <div class="col m12 center-align">
                            <div class="card-panel">
                                <strong><h5 class="center">
                                    Your friend calls you up and wants to go on a small road trip over the weekend. You check your schedule and agree to go. However, a potential love interest calls you and asks if you want to 'chill' on Saturday the week before the trip.
                                </strong></h5>
                                <strong><h6 class="center">
                                    How likely are you to bail on the friend in favor of the love interst? 
                                </strong></h6> 

                                <p class="range-field">
                                    <input name="que1" class="input-field" type="range" id="que1" oninput="showVal(this.value)" onchange="showVal(this.value)" min="1" max="5" />
                                    <label for="que1">1 = Not likely || 5 = Very Likely</label>
                                </p>
                                    

                                <strong><h5 class="center">
                                    You go to a party and get handed the aux cord. You play a few songs and your friend walks up to ask if he can play a couple of fire tracks.  
                                </strong></h5>
                                <strong><h6 class="center">
                                    How likely are you to let your friend play some bangers?
                                </strong></h6> 

                                <p class="range-field">
                                    <input name="que2" class="input-field" type="range" id="que2" oninput="showVal(this.value)" onchange="showVal(this.value)" min="1" max="5" />
                                    <label for="que2">1 = Not likely || 5 = Very Likely</label>
                                </p>
                                    

                                <strong><h5 class="center">
                                    A friend has an issue with his vehicle and is not going to be able to get to work in the morning.  
                                </strong></h5>
                                <strong><h6 class="center">
                                    How likely are you to offer your friend a ride? 
                                </strong></h6> 

                                <p class="range-field">
                                    <input name="que3" class="input-field" type="range" id="que3" oninput="showVal(this.value)" onchange="showVal(this.value)" min="1" max="5" />
                                    <label for="que3">1 = Not likely || 5 = Very Likely</label>
                                </p>
                                    

                                <strong><h5 class="center">
                                    You're playing Fortnite and you drink two small shield potions. You have one more potion, and your friend has no shields. 
                                </strong></h5>
                                <strong><h6 class="center">
                                    How likely are you to give the potion to your friend? 
                                </strong></h6> 

                                <p class="range-field">
                                    <input name="que4" class="input-field" type="range" id="que4" oninput="showVal(this.value)" onchange="showVal(this.value)" min="1" max="5" />
                                    <label for="que4">1 = Not likely || 5 = Very Likely</label>
                                </p>
                                    

                                <strong><h5 class="center">
                                    Your friend is doing some scumbag stuff that does not seem true to who they are. The activities they are participating in are both dangerous and illicit.
                                </strong></h5>
                                <strong><h6 class="center">
                                    How likely are you to try and talk some sense into your friend? 
                                </strong></h6> 

                                <p class="range-field">
                                    <input name="que5" class="input-field" type="range" id="que5" oninput="showVal(this.value)" onchange="showVal(this.value)" min="1" max="5" />
                                    <label for="que5">1 = Not likely || 5 = Very Likely</label>
                                </p>
                                    

                                <strong><h5 class="center">
                                    You're at a craft brewery with a buddy of yours. Y'all each get different beers, but both beers sound good. Your friend asks if he can try a sip of yours.  
                                </strong></h5>
                                <strong><h6 class="center">
                                    How likely are you to let your friend try a sip of beer? 
                                </strong></h6> 

                                <p class="range-field">
                                    <input name="que6" class="input-field" type="range" id="que6" oninput="showVal(this.value)" onchange="showVal(this.value)" min="1" max="5" />
                                    <label for="que6">1 = Not likely || 5 = Very Likely</label>
                                </p>
                                    

                                <strong><h5 class="center">
                                A friend says they like a scumbag music artist. For example, the mumble rap artist XXXtentacion. You know that the music they like and the artist who makes it are both trash.
                                </strong></h5>
                                <strong><h6 class="center">
                                    How likely are you to tell your friend that they shouldn't listen to the artist? 
                                </strong></h6> 

                                <p class="range-field">
                                    <input name="que7" class="input-field" type="range" id="que7" oninput="showVal(this.value)" onchange="showVal(this.value)" min="1" max="5" />
                                    <label for="que7">1 = Not likely || 5 = Very Likely</label>
                                </p>
                                    

                                <strong><h5 class="center">
                                    Your friend is beyond the point of inebriation and has become totally black-out drunk. They are making a fool of themself, and could be in danger of alcohol poisoning.
                                </strong></h5>
                                <strong><h6 class="center">
                                    How likely are you to encourage your friend to continue drinking? 
                                </strong></h6> 

                                <p class="range-field">
                                    <input name="que8" class="input-field" type="range" id="que8" oninput="showVal(this.value)" onchange="showVal(this.value)" min="1" max="5" />
                                    <label for="que8">1 = Not likely || 5 = Very Likely</label>
                                </p>
                                    
                                <strong><h5 class="center">
                                    Your friend of the same sex tells you that they love you. You are both of a straight sexual orientation.
                                </strong></h5>
                                <strong><h6 class="center">
                                    How likely are you to tell your friend to cut that gay stuff out? 
                                </strong></h6> 

                                <p class="range-field">
                                    <input name="que9" class="input-field" type="range" id="que9" oninput="showVal(this.value)" onchange="showVal(this.value)" min="1" max="5" />
                                    <label for="que9">1 = Not likely || 5 = Very Likely</label>
                                </p>

                                <strong><h5 class="center">
                                    You're on your way to hangout with a group of friends. They call you while you're on the way to them and ask you to pick up a few party supplies.
                                </strong></h5>
                                <strong><h6 class="center">
                                    How likely are you to get the supplies for your friends?
                                </strong></h6> 

                                <p class="range-field">
                                    <input name="que10" class="input-field" type="range" id="que10" oninput="showVal(this.value)" onchange="showVal(this.value)" min="1" max="5" />
                                    <label for="que10">1 = Not likely || 5 = Very Likely</label>
                                </p>
                                    
                        
                                <br>
                                <button for="userForm" data-target="matchModal" type="submit" value="Submit" class="btn center-align btn-large waves-effect waves-light deep-purple modal-trigger" id="subBtn"> Submit
                                </button>

                            </form>
                        </div>
                    </div>
                </div>
            </main>

        <footer>
            <div class="row">
                <div class="col md12 center">
                    <p>
                        <a style="font-size: 10px" href="/api/friends">
                            Friends API
                        </a> ||
                        <a style="font-size: 10px" href="https://github.com/wabernathy96/friendFinder">
                            Github Repo
                        </a>
                    </p>
                </div>
            </div>
        </footer>
    
    </div>  

    

    <!-- Modal to Display Closest Friend Match -->\
    <div id="matchModal" class="modal">
        <div class="modal-content center-align">
            <h5>Match Found!</h5>
            <div class="divider"></div>
			<h5 id="matchName"></h5>
			<img id="matchImg" class="materialboxed" width="650" src="">
        </div>
        <div class="modal-footer center-align">
            <button  href="/survey.html" class="btn center-align btn-large waves-effect waves-light deep-purple" onClick="window.location.reload();" id="modBtn"> Redo Survey
            </button>
        </div>
    </div>

    <script>
        $('select').material_select();
        $('#matchModal').modal({
				dismissible: false, // Modal can be dismissed by clicking outside of the modal
				opacity: .5, // Opacity of modal background
				inDuration: 300, // Transition in duration
				outDuration: 200, // Transition out duration
				startingTop: '4%', // Starting top style attribute
				endingTop: '10%' // Ending top style attribute
        });
        
        $("#subBtn").on('click', (event) => {
            event.preventDefault();

            let userInput = {
                name: $('#userName').val().trim(),
                photo: $('#photoLink').val().trim(),
                scores: [
                    $('#que1').val().trim(),
					$('#que2').val().trim(),
					$('#que3').val().trim(),
					$('#que4').val().trim(),
					$('#que5').val().trim(),
					$('#que6').val().trim(),
					$('#que7').val().trim(),
					$('#que8').val().trim(),
					$('#que9').val().trim(),
					$('#que10').val().trim()
                ]
            };
            
            $.post('/api/friends', userInput).done((data) => {
      			// console.log('response = ' + JSON.stringify(data));
      			// Set the name and image values of friend match
      			$('#matchName').html(data.matchName);
		    	$("#matchImg").attr("src", data.matchImg);
		    	// Pop open the modal dialog
                  $('#matchModal').modal('open');
            });

        });
    </script>

    <style>
        input[type=range]::-webkit-slider-thumb {
            background-color: #673ab7;
        }
        input[type=range]::-moz-range-thumb {
            background-color: #673ab7;
        }
        input[type=range]::-ms-thumb {
            background-color: #673ab7;
        }
        input[type=range] + .thumb {
            background-color: #673ab7;
        }
        input[type=range] + .thumb.active .value {
            color: #dedede;
        }

        /* label focus color */
        .input-field input:focus + label {
            color: #673ab7 !important;
        }
        /* label underline focus color */
        .row .input-field input:focus {
            border-bottom: 1px solid #673ab7 !important;
            box-shadow: 0 1px 0 0 #673ab7 !important
        }

    </style>
            

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
    

</body>
</html>